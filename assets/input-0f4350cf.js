import{d as A,g as ft,by as pt,x as m,c2 as vt,at as mt,o as ce,a as Se,y as P,ac as Ve,k as yt,X as ue,ab as ht,l as me,aG as Ae,m as xe,b7 as bt,aC as Et,aj as gt,ak as wt,af as St,ag as xt,u as $e,ar as ye,ck as Tt,cl as Ct,cm as Ft,as as It,e as j,n as V,be as Pt,I as _t,V as kt,F as y,O as I,Q as h,ao as he,K as S,ai as a,q as Q,J as M,G as k,H as G,P as ne,t as J,aq as be,p as Nt,aR as Rt,M as Lt,N as Ot,R as se,L as zt,_ as Ge,a0 as Be,am as Vt,al as At}from"./index-13efeb1f.js";import{E as Je,U as we,m as $t,d as He}from"./typescript-0560ab07.js";const Bt=()=>A&&/firefox/i.test(window.navigator.userAgent);function Qe(e){return e==null}const Ht=(e,s)=>{if(!A)return!1;const n={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(s)],t=ft(e,n);return["scroll","auto","overlay"].some(l=>t.includes(l))},go=(e,s)=>{if(!A)return;let n=e;for(;n;){if([window,document,document.documentElement].includes(n))return window;if(Ht(n,s))return n;n=n.parentNode}return n};let ae;const wo=e=>{var s;if(!A)return 0;if(ae!==void 0)return ae;const n=document.createElement("div");n.className=`${e}-scrollbar__wrap`,n.style.visibility="hidden",n.style.width="100px",n.style.position="absolute",n.style.top="-9999px",document.body.appendChild(n);const t=n.offsetWidth;n.style.overflow="scroll";const l=document.createElement("div");l.style.width="100%",n.appendChild(l);const u=l.offsetWidth;return(s=n.parentNode)==null||s.removeChild(n),ae=t-u,ae};function So(e,s){if(!A)return;if(!s){e.scrollTop=0;return}const n=[];let t=s.offsetParent;for(;t!==null&&e!==t&&e.contains(t);)n.push(t),t=t.offsetParent;const l=s.offsetTop+n.reduce((f,g)=>f+g.offsetTop,0),u=l+s.offsetHeight,c=e.scrollTop,E=c+e.clientHeight;l<c?e.scrollTop=l:u>E&&(e.scrollTop=u-e.clientHeight)}const xo=e=>["",...pt].includes(e),Kt=e=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(e),Dt=["class","style"],Ut=/^on[A-Z]/,Mt=(e={})=>{const{excludeListeners:s=!1,excludeKeys:n}=e,t=m(()=>((n==null?void 0:n.value)||[]).concat(Dt)),l=mt();return l?m(()=>{var u;return vt(Object.entries((u=l.proxy)==null?void 0:u.$attrs).filter(([c])=>!t.value.includes(c)&&!(s&&Ut.test(c))))}):m(()=>({}))};let W=[];const Ke=e=>{const s=e;s.key===Je.esc&&W.forEach(n=>n(s))},Wt=e=>{ce(()=>{W.length===0&&document.addEventListener("keydown",Ke),A&&W.push(e)}),Se(()=>{W=W.filter(s=>s!==e),W.length===0&&A&&document.removeEventListener("keydown",Ke)})};function jt(e){const s=P();function n(){if(e.value==null)return;const{selectionStart:l,selectionEnd:u,value:c}=e.value;if(l==null||u==null)return;const E=c.slice(0,Math.max(0,l)),f=c.slice(Math.max(0,u));s.value={selectionStart:l,selectionEnd:u,value:c,beforeTxt:E,afterTxt:f}}function t(){if(e.value==null||s.value==null)return;const{value:l}=e.value,{beforeTxt:u,afterTxt:c,selectionStart:E}=s.value;if(u==null||c==null||E==null)return;let f=l.length;if(l.endsWith(c))f=l.length-c.length;else if(l.startsWith(u))f=u.length;else{const g=u[E-1],x=l.indexOf(g,E-1);x!==-1&&(f=x+1)}e.value.setSelectionRange(f,f)}return[n,t]}let C;const Yt=`
  height:0 !important;
  visibility:hidden !important;
  ${Bt()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,qt=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function Xt(e){const s=window.getComputedStyle(e),n=s.getPropertyValue("box-sizing"),t=Number.parseFloat(s.getPropertyValue("padding-bottom"))+Number.parseFloat(s.getPropertyValue("padding-top")),l=Number.parseFloat(s.getPropertyValue("border-bottom-width"))+Number.parseFloat(s.getPropertyValue("border-top-width"));return{contextStyle:qt.map(c=>`${c}:${s.getPropertyValue(c)}`).join(";"),paddingSize:t,borderSize:l,boxSizing:n}}function De(e,s=1,n){var t;C||(C=document.createElement("textarea"),document.body.appendChild(C));const{paddingSize:l,borderSize:u,boxSizing:c,contextStyle:E}=Xt(e);C.setAttribute("style",`${E};${Yt}`),C.value=e.value||e.placeholder||"";let f=C.scrollHeight;const g={};c==="border-box"?f=f+u:c==="content-box"&&(f=f-l),C.value="";const x=C.scrollHeight-l;if(Ve(s)){let p=x*s;c==="border-box"&&(p=p+l+u),f=Math.max(p,f),g.minHeight=`${p}px`}if(Ve(n)){let p=x*n;c==="border-box"&&(p=p+l+u),f=Math.min(p,f)}return g.height=`${f}px`,(t=C.parentNode)==null||t.removeChild(C),C=void 0,g}const Gt=yt({id:{type:String,default:void 0},size:ht,disabled:Boolean,modelValue:{type:me([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:me([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:Ae},prefixIcon:{type:Ae},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:me([Object,Array,String]),default:()=>$t({})}}),Jt={[we]:e=>ue(e),input:e=>ue(e),change:e=>ue(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},Qt=["role"],Zt=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form"],eo=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form"],to=xe({name:"ElInput",inheritAttrs:!1}),oo=xe({...to,props:Gt,emits:Jt,setup(e,{expose:s,emit:n}){const t=e,l=bt(),u=Et(),c=m(()=>{const o={};return t.containerRole==="combobox"&&(o["aria-haspopup"]=l["aria-haspopup"],o["aria-owns"]=l["aria-owns"],o["aria-expanded"]=l["aria-expanded"]),o}),E=m(()=>[t.type==="textarea"?w.b():r.b(),r.m(Z.value),r.is("disabled",i.value),r.is("exceed",ot.value),{[r.b("group")]:u.prepend||u.append,[r.bm("group","append")]:u.append,[r.bm("group","prepend")]:u.prepend,[r.m("prefix")]:u.prefix||t.prefixIcon,[r.m("suffix")]:u.suffix||t.suffixIcon||t.clearable||t.showPassword,[r.bm("suffix","password-clear")]:ee.value&&fe.value},l.class]),f=m(()=>[r.e("wrapper"),r.is("focus",N.value)]),g=Mt({excludeKeys:m(()=>Object.keys(c.value))}),{form:x,formItem:p}=gt(),{inputId:Y}=wt(t,{formItemContext:p}),Z=St(),i=xt(),r=$e("input"),w=$e("textarea"),b=ye(),v=ye(),N=P(!1),B=P(!1),R=P(!1),H=P(!1),$=P(),L=ye(t.inputStyle),_=m(()=>b.value||v.value),K=m(()=>{var o;return(o=x==null?void 0:x.statusIcon)!=null?o:!1}),D=m(()=>(p==null?void 0:p.validateState)||""),T=m(()=>D.value&&Tt[D.value]),et=m(()=>H.value?Ct:Ft),tt=m(()=>[l.style,t.inputStyle]),Fe=m(()=>[t.inputStyle,L.value,{resize:t.resize}]),O=m(()=>Qe(t.modelValue)?"":String(t.modelValue)),ee=m(()=>t.clearable&&!i.value&&!t.readonly&&!!O.value&&(N.value||B.value)),fe=m(()=>t.showPassword&&!i.value&&!t.readonly&&!!O.value&&(!!O.value||N.value)),U=m(()=>t.showWordLimit&&!!g.value.maxlength&&(t.type==="text"||t.type==="textarea")&&!i.value&&!t.readonly&&!t.showPassword),pe=m(()=>O.value.length),ot=m(()=>!!U.value&&pe.value>Number(g.value.maxlength)),nt=m(()=>!!u.suffix||!!t.suffixIcon||ee.value||t.showPassword||U.value||!!D.value&&K.value),[st,at]=jt(b);It(v,o=>{if(rt(),!U.value||t.resize!=="both")return;const d=o[0],{width:F}=d.contentRect;$.value={right:`calc(100% - ${F+15+6}px)`}});const q=()=>{const{type:o,autosize:d}=t;if(!(!A||o!=="textarea"||!v.value))if(d){const F=Be(d)?d.minRows:void 0,oe=Be(d)?d.maxRows:void 0,ze=De(v.value,F,oe);L.value={overflowY:"hidden",...ze},V(()=>{v.value.offsetHeight,L.value=ze})}else L.value={minHeight:De(v.value).minHeight}},rt=(o=>{let d=!1;return()=>{var F;if(d||!t.autosize)return;((F=v.value)==null?void 0:F.offsetParent)===null||(o(),d=!0)}})(q),X=()=>{const o=_.value,d=t.formatter?t.formatter(O.value):O.value;!o||o.value===d||(o.value=d)},ve=async o=>{st();let{value:d}=o.target;if(t.formatter&&(d=t.parser?t.parser(d):d),!R.value){if(d===O.value){X();return}n(we,d),n("input",d),await V(),X(),at()}},Ie=o=>{n("change",o.target.value)},Pe=o=>{n("compositionstart",o),R.value=!0},_e=o=>{var d;n("compositionupdate",o);const F=(d=o.target)==null?void 0:d.value,oe=F[F.length-1]||"";R.value=!Kt(oe)},ke=o=>{n("compositionend",o),R.value&&(R.value=!1,ve(o))},lt=()=>{H.value=!H.value,te()},te=async()=>{var o;await V(),(o=_.value)==null||o.focus()},it=()=>{var o;return(o=_.value)==null?void 0:o.blur()},Ne=o=>{N.value=!0,n("focus",o)},Re=o=>{var d;N.value=!1,n("blur",o),t.validateEvent&&((d=p==null?void 0:p.validate)==null||d.call(p,"blur").catch(F=>He()))},ut=o=>{B.value=!1,n("mouseleave",o)},ct=o=>{B.value=!0,n("mouseenter",o)},Le=o=>{n("keydown",o)},dt=()=>{var o;(o=_.value)==null||o.select()},Oe=()=>{n(we,""),n("change",""),n("clear"),n("input","")};return j(()=>t.modelValue,()=>{var o;V(()=>q()),t.validateEvent&&((o=p==null?void 0:p.validate)==null||o.call(p,"change").catch(d=>He()))}),j(O,()=>X()),j(()=>t.type,async()=>{await V(),X(),q()}),ce(()=>{!t.formatter&&t.parser,X(),V(q)}),s({input:b,textarea:v,ref:_,textareaStyle:Fe,autosize:Pt(t,"autosize"),focus:te,blur:it,select:dt,clear:Oe,resizeTextarea:q}),(o,d)=>_t((y(),I("div",be(a(c),{class:a(E),style:a(tt),role:o.containerRole,onMouseenter:ct,onMouseleave:ut}),[h(" input "),o.type!=="textarea"?(y(),I(he,{key:0},[h(" prepend slot "),o.$slots.prepend?(y(),I("div",{key:0,class:S(a(r).be("group","prepend"))},[Q(o.$slots,"prepend")],2)):h("v-if",!0),M("div",{class:S(a(f))},[h(" prefix slot "),o.$slots.prefix||o.prefixIcon?(y(),I("span",{key:0,class:S(a(r).e("prefix"))},[M("span",{class:S(a(r).e("prefix-inner")),onClick:te},[Q(o.$slots,"prefix"),o.prefixIcon?(y(),k(a(J),{key:0,class:S(a(r).e("icon"))},{default:G(()=>[(y(),k(ne(o.prefixIcon)))]),_:1},8,["class"])):h("v-if",!0)],2)],2)):h("v-if",!0),M("input",be({id:a(Y),ref_key:"input",ref:b,class:a(r).e("inner")},a(g),{type:o.showPassword?H.value?"text":"password":o.type,disabled:a(i),formatter:o.formatter,parser:o.parser,readonly:o.readonly,autocomplete:o.autocomplete,tabindex:o.tabindex,"aria-label":o.label,placeholder:o.placeholder,style:o.inputStyle,form:t.form,onCompositionstart:Pe,onCompositionupdate:_e,onCompositionend:ke,onInput:ve,onFocus:Ne,onBlur:Re,onChange:Ie,onKeydown:Le}),null,16,Zt),h(" suffix slot "),a(nt)?(y(),I("span",{key:1,class:S(a(r).e("suffix"))},[M("span",{class:S(a(r).e("suffix-inner")),onClick:te},[!a(ee)||!a(fe)||!a(U)?(y(),I(he,{key:0},[Q(o.$slots,"suffix"),o.suffixIcon?(y(),k(a(J),{key:0,class:S(a(r).e("icon"))},{default:G(()=>[(y(),k(ne(o.suffixIcon)))]),_:1},8,["class"])):h("v-if",!0)],64)):h("v-if",!0),a(ee)?(y(),k(a(J),{key:1,class:S([a(r).e("icon"),a(r).e("clear")]),onMousedown:Lt(a(Ot),["prevent"]),onClick:Oe},{default:G(()=>[Nt(a(Rt))]),_:1},8,["class","onMousedown"])):h("v-if",!0),a(fe)?(y(),k(a(J),{key:2,class:S([a(r).e("icon"),a(r).e("password")]),onClick:lt},{default:G(()=>[(y(),k(ne(a(et))))]),_:1},8,["class"])):h("v-if",!0),a(U)?(y(),I("span",{key:3,class:S(a(r).e("count"))},[M("span",{class:S(a(r).e("count-inner"))},se(a(pe))+" / "+se(a(g).maxlength),3)],2)):h("v-if",!0),a(D)&&a(T)&&a(K)?(y(),k(a(J),{key:4,class:S([a(r).e("icon"),a(r).e("validateIcon"),a(r).is("loading",a(D)==="validating")])},{default:G(()=>[(y(),k(ne(a(T))))]),_:1},8,["class"])):h("v-if",!0)],2)],2)):h("v-if",!0)],2),h(" append slot "),o.$slots.append?(y(),I("div",{key:1,class:S(a(r).be("group","append"))},[Q(o.$slots,"append")],2)):h("v-if",!0)],64)):(y(),I(he,{key:1},[h(" textarea "),M("textarea",be({id:a(Y),ref_key:"textarea",ref:v,class:a(w).e("inner")},a(g),{tabindex:o.tabindex,disabled:a(i),readonly:o.readonly,autocomplete:o.autocomplete,style:a(Fe),"aria-label":o.label,placeholder:o.placeholder,form:t.form,onCompositionstart:Pe,onCompositionupdate:_e,onCompositionend:ke,onInput:ve,onFocus:Ne,onBlur:Re,onChange:Ie,onKeydown:Le}),null,16,eo),a(U)?(y(),I("span",{key:0,style:zt($.value),class:S(a(r).e("count"))},se(a(pe))+" / "+se(a(g).maxlength),7)):h("v-if",!0)],64))],16,Qt)),[[kt,o.type!=="hidden"]])}});var no=Ge(oo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const To=Vt(no),Ee="focus-trap.focus-after-trapped",ge="focus-trap.focus-after-released",so="focus-trap.focusout-prevented",Ue={cancelable:!0,bubbles:!1},ao={cancelable:!0,bubbles:!1},Me="focusAfterTrapped",We="focusAfterReleased",ro=Symbol("elFocusTrap"),Te=P(),de=P(0),Ce=P(0);let re=0;const Ze=e=>{const s=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:t=>{const l=t.tagName==="INPUT"&&t.type==="hidden";return t.disabled||t.hidden||l?NodeFilter.FILTER_SKIP:t.tabIndex>=0||t===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)s.push(n.currentNode);return s},je=(e,s)=>{for(const n of e)if(!lo(n,s))return n},lo=(e,s)=>{if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(s&&e===s)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1},io=e=>{const s=Ze(e),n=je(s,e),t=je(s.reverse(),e);return[n,t]},uo=e=>e instanceof HTMLInputElement&&"select"in e,z=(e,s)=>{if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),Ce.value=window.performance.now(),e!==n&&uo(e)&&s&&e.select()}};function Ye(e,s){const n=[...e],t=e.indexOf(s);return t!==-1&&n.splice(t,1),n}const co=()=>{let e=[];return{push:t=>{const l=e[0];l&&t!==l&&l.pause(),e=Ye(e,t),e.unshift(t)},remove:t=>{var l,u;e=Ye(e,t),(u=(l=e[0])==null?void 0:l.resume)==null||u.call(l)}}},fo=(e,s=!1)=>{const n=document.activeElement;for(const t of e)if(z(t,s),document.activeElement!==n)return},qe=co(),po=()=>de.value>Ce.value,le=()=>{Te.value="pointer",de.value=window.performance.now()},Xe=()=>{Te.value="keyboard",de.value=window.performance.now()},vo=()=>(ce(()=>{re===0&&(document.addEventListener("mousedown",le),document.addEventListener("touchstart",le),document.addEventListener("keydown",Xe)),re++}),Se(()=>{re--,re<=0&&(document.removeEventListener("mousedown",le),document.removeEventListener("touchstart",le),document.removeEventListener("keydown",Xe))}),{focusReason:Te,lastUserFocusTimestamp:de,lastAutomatedFocusTimestamp:Ce}),ie=e=>new CustomEvent(so,{...ao,detail:e}),mo=xe({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[Me,We,"focusin","focusout","focusout-prevented","release-requested"],setup(e,{emit:s}){const n=P();let t,l;const{focusReason:u}=vo();Wt(i=>{e.trapped&&!c.paused&&s("release-requested",i)});const c={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},E=i=>{if(!e.loop&&!e.trapped||c.paused)return;const{key:r,altKey:w,ctrlKey:b,metaKey:v,currentTarget:N,shiftKey:B}=i,{loop:R}=e,H=r===Je.tab&&!w&&!b&&!v,$=document.activeElement;if(H&&$){const L=N,[_,K]=io(L);if(_&&K){if(!B&&$===K){const T=ie({focusReason:u.value});s("focusout-prevented",T),T.defaultPrevented||(i.preventDefault(),R&&z(_,!0))}else if(B&&[_,L].includes($)){const T=ie({focusReason:u.value});s("focusout-prevented",T),T.defaultPrevented||(i.preventDefault(),R&&z(K,!0))}}else if($===L){const T=ie({focusReason:u.value});s("focusout-prevented",T),T.defaultPrevented||i.preventDefault()}}};At(ro,{focusTrapRef:n,onKeydown:E}),j(()=>e.focusTrapEl,i=>{i&&(n.value=i)},{immediate:!0}),j([n],([i],[r])=>{i&&(i.addEventListener("keydown",E),i.addEventListener("focusin",x),i.addEventListener("focusout",p)),r&&(r.removeEventListener("keydown",E),r.removeEventListener("focusin",x),r.removeEventListener("focusout",p))});const f=i=>{s(Me,i)},g=i=>s(We,i),x=i=>{const r=a(n);if(!r)return;const w=i.target,b=i.relatedTarget,v=w&&r.contains(w);e.trapped||b&&r.contains(b)||(t=b),v&&s("focusin",i),!c.paused&&e.trapped&&(v?l=w:z(l,!0))},p=i=>{const r=a(n);if(!(c.paused||!r))if(e.trapped){const w=i.relatedTarget;!Qe(w)&&!r.contains(w)&&setTimeout(()=>{if(!c.paused&&e.trapped){const b=ie({focusReason:u.value});s("focusout-prevented",b),b.defaultPrevented||z(l,!0)}},0)}else{const w=i.target;w&&r.contains(w)||s("focusout",i)}};async function Y(){await V();const i=a(n);if(i){qe.push(c);const r=i.contains(document.activeElement)?t:document.activeElement;if(t=r,!i.contains(r)){const b=new Event(Ee,Ue);i.addEventListener(Ee,f),i.dispatchEvent(b),b.defaultPrevented||V(()=>{let v=e.focusStartEl;ue(v)||(z(v),document.activeElement!==v&&(v="first")),v==="first"&&fo(Ze(i),!0),(document.activeElement===r||v==="container")&&z(i)})}}}function Z(){const i=a(n);if(i){i.removeEventListener(Ee,f);const r=new CustomEvent(ge,{...Ue,detail:{focusReason:u.value}});i.addEventListener(ge,g),i.dispatchEvent(r),!r.defaultPrevented&&(u.value=="keyboard"||!po()||i.contains(document.activeElement))&&z(t??document.body),i.removeEventListener(ge,f),qe.remove(c)}}return ce(()=>{e.trapped&&Y(),j(()=>e.trapped,i=>{i?Y():Z()})}),Se(()=>{e.trapped&&Z()}),{onKeydown:E}}});function yo(e,s,n,t,l,u){return Q(e.$slots,"default",{handleKeydown:e.onKeydown})}var Co=Ge(mo,[["render",yo],["__file","/home/runner/work/element-plus/element-plus/packages/components/focus-trap/src/focus-trap.vue"]]);export{Co as E,ro as F,To as a,go as b,Qe as c,Kt as d,wo as g,xo as i,So as s,Mt as u};
