import{d as O,g as ut,bj as ct,m as v,b0 as dt,bN as ft,o as ue,a as Se,K as P,n as Ae,k as pt,al as vt,F as me,H as Ve,Z as ie,l as xe,aV as mt,aW as ht,ar as yt,as as Et,ao as bt,ap as gt,u as ze,ba as he,c4 as wt,c5 as St,c6 as xt,O as Tt,e as j,E as D,aX as Ct,x as Ft,C as Pt,p as h,q as F,R as y,V as ye,z as S,A as a,s as G,y as M,P as _,v as q,U as oe,S as Z,aw as Ee,t as It,aO as _t,W as kt,N as Nt,B as ne,Q as Lt,_ as Ye,ac as De,D as Rt,at as Ot}from"./index-a8835d9d.js";function qe(e){return e==null}class At extends Error{constructor(s){super(s),this.name="ElementPlusError"}}function ho(e,s){throw new At(`[${e}] ${s}`)}function yo(e,s){}const Vt=(e,s)=>{if(!O)return!1;const n={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(s)],t=ut(e,n);return["scroll","auto","overlay"].some(l=>t.includes(l))},Eo=(e,s)=>{if(!O)return;let n=e;for(;n;){if([window,document,document.documentElement].includes(n))return window;if(Vt(n,s))return n;n=n.parentNode}return n};let se;const bo=e=>{var s;if(!O)return 0;if(se!==void 0)return se;const n=document.createElement("div");n.className=`${e}-scrollbar__wrap`,n.style.visibility="hidden",n.style.width="100px",n.style.position="absolute",n.style.top="-9999px",document.body.appendChild(n);const t=n.offsetWidth;n.style.overflow="scroll";const l=document.createElement("div");l.style.width="100%",n.appendChild(l);const u=l.offsetWidth;return(s=n.parentNode)==null||s.removeChild(n),se=t-u,se};function go(e,s){if(!O)return;if(!s){e.scrollTop=0;return}const n=[];let t=s.offsetParent;for(;t!==null&&e!==t&&e.contains(t);)n.push(t),t=t.offsetParent;const l=s.offsetTop+n.reduce((d,g)=>d+g.offsetTop,0),u=l+s.offsetHeight,c=e.scrollTop,b=c+e.clientHeight;l<c?e.scrollTop=l:u>b&&(e.scrollTop=u-e.clientHeight)}const Ze={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},we="update:modelValue",wo="change",So=e=>["",...ct].includes(e),zt=()=>O&&/firefox/i.test(window.navigator.userAgent),Dt=e=>/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(e),$t=e=>e,Bt=["class","style"],Ut=/^on[A-Z]/,Kt=(e={})=>{const{excludeListeners:s=!1,excludeKeys:n}=e,t=v(()=>((n==null?void 0:n.value)||[]).concat(Bt)),l=dt();return l?v(()=>{var u;return ft(Object.entries((u=l.proxy)==null?void 0:u.$attrs).filter(([c])=>!t.value.includes(c)&&!(s&&Ut.test(c))))}):v(()=>({}))};let W=[];const $e=e=>{const s=e;s.key===Ze.esc&&W.forEach(n=>n(s))},Ht=e=>{ue(()=>{W.length===0&&document.addEventListener("keydown",$e),O&&W.push(e)}),Se(()=>{W=W.filter(s=>s!==e),W.length===0&&O&&document.removeEventListener("keydown",$e)})};function Mt(e){const s=P();function n(){if(e.value==null)return;const{selectionStart:l,selectionEnd:u,value:c}=e.value;if(l==null||u==null)return;const b=c.slice(0,Math.max(0,l)),d=c.slice(Math.max(0,u));s.value={selectionStart:l,selectionEnd:u,value:c,beforeTxt:b,afterTxt:d}}function t(){if(e.value==null||s.value==null)return;const{value:l}=e.value,{beforeTxt:u,afterTxt:c,selectionStart:b}=s.value;if(u==null||c==null||b==null)return;let d=l.length;if(l.endsWith(c))d=l.length-c.length;else if(l.startsWith(u))d=u.length;else{const g=u[b-1],x=l.indexOf(g,b-1);x!==-1&&(d=x+1)}e.value.setSelectionRange(d,d)}return[n,t]}let C;const Wt=`
  height:0 !important;
  visibility:hidden !important;
  ${zt()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,jt=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function Xt(e){const s=window.getComputedStyle(e),n=s.getPropertyValue("box-sizing"),t=Number.parseFloat(s.getPropertyValue("padding-bottom"))+Number.parseFloat(s.getPropertyValue("padding-top")),l=Number.parseFloat(s.getPropertyValue("border-bottom-width"))+Number.parseFloat(s.getPropertyValue("border-top-width"));return{contextStyle:jt.map(c=>`${c}:${s.getPropertyValue(c)}`).join(";"),paddingSize:t,borderSize:l,boxSizing:n}}function Be(e,s=1,n){var t;C||(C=document.createElement("textarea"),document.body.appendChild(C));const{paddingSize:l,borderSize:u,boxSizing:c,contextStyle:b}=Xt(e);C.setAttribute("style",`${b};${Wt}`),C.value=e.value||e.placeholder||"";let d=C.scrollHeight;const g={};c==="border-box"?d=d+u:c==="content-box"&&(d=d-l),C.value="";const x=C.scrollHeight-l;if(Ae(s)){let p=x*s;c==="border-box"&&(p=p+l+u),d=Math.max(p,d),g.minHeight=`${p}px`}if(Ae(n)){let p=x*n;c==="border-box"&&(p=p+l+u),d=Math.min(p,d)}return g.height=`${d}px`,(t=C.parentNode)==null||t.removeChild(C),C=void 0,g}const Yt=pt({id:{type:String,default:void 0},size:vt,disabled:Boolean,modelValue:{type:me([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:me([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:Ve},prefixIcon:{type:Ve},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:me([Object,Array,String]),default:()=>$t({})}}),qt={[we]:e=>ie(e),input:e=>ie(e),change:e=>ie(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},Zt=["role"],Gt=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form"],Jt=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form"],Qt=xe({name:"ElInput",inheritAttrs:!1}),eo=xe({...Qt,props:Yt,emits:qt,setup(e,{expose:s,emit:n}){const t=e,l=mt(),u=ht(),c=v(()=>{const o={};return t.containerRole==="combobox"&&(o["aria-haspopup"]=l["aria-haspopup"],o["aria-owns"]=l["aria-owns"],o["aria-expanded"]=l["aria-expanded"]),o}),b=v(()=>[t.type==="textarea"?w.b():r.b(),r.m(J.value),r.is("disabled",i.value),r.is("exceed",et.value),{[r.b("group")]:u.prepend||u.append,[r.bm("group","append")]:u.append,[r.bm("group","prepend")]:u.prepend,[r.m("prefix")]:u.prefix||t.prefixIcon,[r.m("suffix")]:u.suffix||t.suffixIcon||t.clearable||t.showPassword,[r.bm("suffix","password-clear")]:Q.value&&de.value},l.class]),d=v(()=>[r.e("wrapper"),r.is("focus",k.value)]),g=Kt({excludeKeys:v(()=>Object.keys(c.value))}),{form:x,formItem:p}=yt(),{inputId:X}=Et(t,{formItemContext:p}),J=bt(),i=gt(),r=ze("input"),w=ze("textarea"),E=he(),m=he(),k=P(!1),$=P(!1),N=P(!1),B=P(!1),A=P(),V=he(t.inputStyle),I=v(()=>E.value||m.value),U=v(()=>{var o;return(o=x==null?void 0:x.statusIcon)!=null?o:!1}),K=v(()=>(p==null?void 0:p.validateState)||""),T=v(()=>K.value&&wt[K.value]),Je=v(()=>B.value?St:xt),Qe=v(()=>[l.style,t.inputStyle]),Fe=v(()=>[t.inputStyle,V.value,{resize:t.resize}]),L=v(()=>qe(t.modelValue)?"":String(t.modelValue)),Q=v(()=>t.clearable&&!i.value&&!t.readonly&&!!L.value&&(k.value||$.value)),de=v(()=>t.showPassword&&!i.value&&!t.readonly&&!!L.value&&(!!L.value||k.value)),H=v(()=>t.showWordLimit&&!!g.value.maxlength&&(t.type==="text"||t.type==="textarea")&&!i.value&&!t.readonly&&!t.showPassword),fe=v(()=>L.value.length),et=v(()=>!!H.value&&fe.value>Number(g.value.maxlength)),tt=v(()=>!!u.suffix||!!t.suffixIcon||Q.value||t.showPassword||H.value||!!K.value&&U.value),[ot,nt]=Mt(E);Tt(m,o=>{if(!H.value||t.resize!=="both")return;const f=o[0],{width:z}=f.contentRect;A.value={right:`calc(100% - ${z+15+6}px)`}});const ee=()=>{const{type:o,autosize:f}=t;if(!(!O||o!=="textarea"||!m.value))if(f){const z=De(f)?f.minRows:void 0,ve=De(f)?f.maxRows:void 0;V.value={...Be(m.value,z,ve)}}else V.value={minHeight:Be(m.value).minHeight}},Y=()=>{const o=I.value;!o||o.value===L.value||(o.value=L.value)},pe=async o=>{ot();let{value:f}=o.target;if(t.formatter&&(f=t.parser?t.parser(f):f,f=t.formatter(f)),!N.value){if(f===L.value){Y();return}n(we,f),n("input",f),await D(),Y(),nt()}},Pe=o=>{n("change",o.target.value)},Ie=o=>{n("compositionstart",o),N.value=!0},_e=o=>{var f;n("compositionupdate",o);const z=(f=o.target)==null?void 0:f.value,ve=z[z.length-1]||"";N.value=!Dt(ve)},ke=o=>{n("compositionend",o),N.value&&(N.value=!1,pe(o))},st=()=>{B.value=!B.value,te()},te=async()=>{var o;await D(),(o=I.value)==null||o.focus()},at=()=>{var o;return(o=I.value)==null?void 0:o.blur()},Ne=o=>{k.value=!0,n("focus",o)},Le=o=>{var f;k.value=!1,n("blur",o),t.validateEvent&&((f=p==null?void 0:p.validate)==null||f.call(p,"blur").catch(z=>void 0))},rt=o=>{$.value=!1,n("mouseleave",o)},lt=o=>{$.value=!0,n("mouseenter",o)},Re=o=>{n("keydown",o)},it=()=>{var o;(o=I.value)==null||o.select()},Oe=()=>{n(we,""),n("change",""),n("clear"),n("input","")};return j(()=>t.modelValue,()=>{var o;D(()=>ee()),t.validateEvent&&((o=p==null?void 0:p.validate)==null||o.call(p,"change").catch(f=>void 0))}),j(L,()=>Y()),j(()=>t.type,async()=>{await D(),Y(),ee()}),ue(()=>{!t.formatter&&t.parser,Y(),D(ee)}),s({input:E,textarea:m,ref:I,textareaStyle:Fe,autosize:Ct(t,"autosize"),focus:te,blur:at,select:it,clear:Oe,resizeTextarea:ee}),(o,f)=>Ft((h(),F("div",Ee(a(c),{class:a(b),style:a(Qe),role:o.containerRole,onMouseenter:lt,onMouseleave:rt}),[y(" input "),o.type!=="textarea"?(h(),F(ye,{key:0},[y(" prepend slot "),o.$slots.prepend?(h(),F("div",{key:0,class:S(a(r).be("group","prepend"))},[G(o.$slots,"prepend")],2)):y("v-if",!0),M("div",{class:S(a(d))},[y(" prefix slot "),o.$slots.prefix||o.prefixIcon?(h(),F("span",{key:0,class:S(a(r).e("prefix"))},[M("span",{class:S(a(r).e("prefix-inner")),onClick:te},[G(o.$slots,"prefix"),o.prefixIcon?(h(),_(a(Z),{key:0,class:S(a(r).e("icon"))},{default:q(()=>[(h(),_(oe(o.prefixIcon)))]),_:1},8,["class"])):y("v-if",!0)],2)],2)):y("v-if",!0),M("input",Ee({id:a(X),ref_key:"input",ref:E,class:a(r).e("inner")},a(g),{type:o.showPassword?B.value?"text":"password":o.type,disabled:a(i),formatter:o.formatter,parser:o.parser,readonly:o.readonly,autocomplete:o.autocomplete,tabindex:o.tabindex,"aria-label":o.label,placeholder:o.placeholder,style:o.inputStyle,form:t.form,onCompositionstart:Ie,onCompositionupdate:_e,onCompositionend:ke,onInput:pe,onFocus:Ne,onBlur:Le,onChange:Pe,onKeydown:Re}),null,16,Gt),y(" suffix slot "),a(tt)?(h(),F("span",{key:1,class:S(a(r).e("suffix"))},[M("span",{class:S(a(r).e("suffix-inner")),onClick:te},[!a(Q)||!a(de)||!a(H)?(h(),F(ye,{key:0},[G(o.$slots,"suffix"),o.suffixIcon?(h(),_(a(Z),{key:0,class:S(a(r).e("icon"))},{default:q(()=>[(h(),_(oe(o.suffixIcon)))]),_:1},8,["class"])):y("v-if",!0)],64)):y("v-if",!0),a(Q)?(h(),_(a(Z),{key:1,class:S([a(r).e("icon"),a(r).e("clear")]),onMousedown:kt(a(Nt),["prevent"]),onClick:Oe},{default:q(()=>[It(a(_t))]),_:1},8,["class","onMousedown"])):y("v-if",!0),a(de)?(h(),_(a(Z),{key:2,class:S([a(r).e("icon"),a(r).e("password")]),onClick:st},{default:q(()=>[(h(),_(oe(a(Je))))]),_:1},8,["class"])):y("v-if",!0),a(H)?(h(),F("span",{key:3,class:S(a(r).e("count"))},[M("span",{class:S(a(r).e("count-inner"))},ne(a(fe))+" / "+ne(a(g).maxlength),3)],2)):y("v-if",!0),a(K)&&a(T)&&a(U)?(h(),_(a(Z),{key:4,class:S([a(r).e("icon"),a(r).e("validateIcon"),a(r).is("loading",a(K)==="validating")])},{default:q(()=>[(h(),_(oe(a(T))))]),_:1},8,["class"])):y("v-if",!0)],2)],2)):y("v-if",!0)],2),y(" append slot "),o.$slots.append?(h(),F("div",{key:1,class:S(a(r).be("group","append"))},[G(o.$slots,"append")],2)):y("v-if",!0)],64)):(h(),F(ye,{key:1},[y(" textarea "),M("textarea",Ee({id:a(X),ref_key:"textarea",ref:m,class:a(w).e("inner")},a(g),{tabindex:o.tabindex,disabled:a(i),readonly:o.readonly,autocomplete:o.autocomplete,style:a(Fe),"aria-label":o.label,placeholder:o.placeholder,form:t.form,onCompositionstart:Ie,onCompositionupdate:_e,onCompositionend:ke,onInput:pe,onFocus:Ne,onBlur:Le,onChange:Pe,onKeydown:Re}),null,16,Jt),a(H)?(h(),F("span",{key:0,style:Lt(A.value),class:S(a(r).e("count"))},ne(a(fe))+" / "+ne(a(g).maxlength),7)):y("v-if",!0)],64))],16,Zt)),[[Pt,o.type!=="hidden"]])}});var to=Ye(eo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const xo=Rt(to),be="focus-trap.focus-after-trapped",ge="focus-trap.focus-after-released",oo="focus-trap.focusout-prevented",Ue={cancelable:!0,bubbles:!1},no={cancelable:!0,bubbles:!1},Ke="focusAfterTrapped",He="focusAfterReleased",so=Symbol("elFocusTrap"),Te=P(),ce=P(0),Ce=P(0);let ae=0;const Ge=e=>{const s=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:t=>{const l=t.tagName==="INPUT"&&t.type==="hidden";return t.disabled||t.hidden||l?NodeFilter.FILTER_SKIP:t.tabIndex>=0||t===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)s.push(n.currentNode);return s},Me=(e,s)=>{for(const n of e)if(!ao(n,s))return n},ao=(e,s)=>{if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(s&&e===s)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1},ro=e=>{const s=Ge(e),n=Me(s,e),t=Me(s.reverse(),e);return[n,t]},lo=e=>e instanceof HTMLInputElement&&"select"in e,R=(e,s)=>{if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),Ce.value=window.performance.now(),e!==n&&lo(e)&&s&&e.select()}};function We(e,s){const n=[...e],t=e.indexOf(s);return t!==-1&&n.splice(t,1),n}const io=()=>{let e=[];return{push:t=>{const l=e[0];l&&t!==l&&l.pause(),e=We(e,t),e.unshift(t)},remove:t=>{var l,u;e=We(e,t),(u=(l=e[0])==null?void 0:l.resume)==null||u.call(l)}}},uo=(e,s=!1)=>{const n=document.activeElement;for(const t of e)if(R(t,s),document.activeElement!==n)return},je=io(),co=()=>ce.value>Ce.value,re=()=>{Te.value="pointer",ce.value=window.performance.now()},Xe=()=>{Te.value="keyboard",ce.value=window.performance.now()},fo=()=>(ue(()=>{ae===0&&(document.addEventListener("mousedown",re),document.addEventListener("touchstart",re),document.addEventListener("keydown",Xe)),ae++}),Se(()=>{ae--,ae<=0&&(document.removeEventListener("mousedown",re),document.removeEventListener("touchstart",re),document.removeEventListener("keydown",Xe))}),{focusReason:Te,lastUserFocusTimestamp:ce,lastAutomatedFocusTimestamp:Ce}),le=e=>new CustomEvent(oo,{...no,detail:e}),po=xe({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[Ke,He,"focusin","focusout","focusout-prevented","release-requested"],setup(e,{emit:s}){const n=P();let t,l;const{focusReason:u}=fo();Ht(i=>{e.trapped&&!c.paused&&s("release-requested",i)});const c={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},b=i=>{if(!e.loop&&!e.trapped||c.paused)return;const{key:r,altKey:w,ctrlKey:E,metaKey:m,currentTarget:k,shiftKey:$}=i,{loop:N}=e,B=r===Ze.tab&&!w&&!E&&!m,A=document.activeElement;if(B&&A){const V=k,[I,U]=ro(V);if(I&&U){if(!$&&A===U){const T=le({focusReason:u.value});s("focusout-prevented",T),T.defaultPrevented||(i.preventDefault(),N&&R(I,!0))}else if($&&[I,V].includes(A)){const T=le({focusReason:u.value});s("focusout-prevented",T),T.defaultPrevented||(i.preventDefault(),N&&R(U,!0))}}else if(A===V){const T=le({focusReason:u.value});s("focusout-prevented",T),T.defaultPrevented||i.preventDefault()}}};Ot(so,{focusTrapRef:n,onKeydown:b}),j(()=>e.focusTrapEl,i=>{i&&(n.value=i)},{immediate:!0}),j([n],([i],[r])=>{i&&(i.addEventListener("keydown",b),i.addEventListener("focusin",x),i.addEventListener("focusout",p)),r&&(r.removeEventListener("keydown",b),r.removeEventListener("focusin",x),r.removeEventListener("focusout",p))});const d=i=>{s(Ke,i)},g=i=>s(He,i),x=i=>{const r=a(n);if(!r)return;const w=i.target,E=i.relatedTarget,m=w&&r.contains(w);e.trapped||E&&r.contains(E)||(t=E),m&&s("focusin",i),!c.paused&&e.trapped&&(m?l=w:R(l,!0))},p=i=>{const r=a(n);if(!(c.paused||!r))if(e.trapped){const w=i.relatedTarget;!qe(w)&&!r.contains(w)&&setTimeout(()=>{if(!c.paused&&e.trapped){const E=le({focusReason:u.value});s("focusout-prevented",E),E.defaultPrevented||R(l,!0)}},0)}else{const w=i.target;w&&r.contains(w)||s("focusout",i)}};async function X(){await D();const i=a(n);if(i){je.push(c);const r=i.contains(document.activeElement)?t:document.activeElement;if(t=r,!i.contains(r)){const E=new Event(be,Ue);i.addEventListener(be,d),i.dispatchEvent(E),E.defaultPrevented||D(()=>{let m=e.focusStartEl;ie(m)||(R(m),document.activeElement!==m&&(m="first")),m==="first"&&uo(Ge(i),!0),(document.activeElement===r||m==="container")&&R(i)})}}}function J(){const i=a(n);if(i){i.removeEventListener(be,d);const r=new CustomEvent(ge,{...Ue,detail:{focusReason:u.value}});i.addEventListener(ge,g),i.dispatchEvent(r),!r.defaultPrevented&&(u.value=="keyboard"||!co()||i.contains(document.activeElement))&&R(t??document.body),i.removeEventListener(ge,d),je.remove(c)}}return ue(()=>{e.trapped&&X(),j(()=>e.trapped,i=>{i?X():J()})}),Se(()=>{e.trapped&&J()}),{onKeydown:b}}});function vo(e,s,n,t,l,u){return G(e.$slots,"default",{handleKeydown:e.onKeydown})}var To=Ye(po,[["render",vo],["__file","/home/runner/work/element-plus/element-plus/packages/components/focus-trap/src/focus-trap.vue"]]);export{wo as C,Ze as E,so as F,we as U,To as a,xo as b,Eo as c,yo as d,qe as e,Dt as f,bo as g,So as i,$t as m,go as s,ho as t,Kt as u};
